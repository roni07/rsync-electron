<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Sync</title>
</head>
<body>
<h2>File Sync Using Rsync</h2>

<input type="password" id="passwordInput" placeholder="Enter SSH Password"/>
<button id="syncPush">Sync Push</button>
<button id="syncPull">Sync Pull</button>
<button id="syncBoth">Sync</button>
<p id="syncStatus"></p>

<script>
    const {ipcRenderer} = require("electron");

    document.getElementById("syncPush").addEventListener("click", () => {

        const statusText = document.getElementById("syncStatus");
        const password = document.getElementById("passwordInput").value;

        if (!password) {
            statusText.textContent = "Please enter your password";
            return;
        }

        statusText.textContent = "ðŸ”„ Syncing... Please wait.";

        ipcRenderer.send("sync-push", {password});
    });

    document.getElementById("syncPull").addEventListener("click", () => {

        const statusText = document.getElementById("syncStatus");
        const password = document.getElementById("passwordInput").value;

        if (!password) {
            statusText.textContent = "Please enter your password";
            return;
        }

        statusText.textContent = "ðŸ”„ Syncing... Please wait.";

        ipcRenderer.send("sync-pull", {password});
    });

    document.getElementById("syncBoth").addEventListener("click", () => {

        const statusText = document.getElementById("syncStatus");
        const password = document.getElementById("passwordInput").value;

        if (!password) {
            statusText.textContent = "Please enter your password";
            return;
        }

        statusText.textContent = "ðŸ”„ Syncing... Please wait.";

        ipcRenderer.send("sync-both", {password});
    });

    ipcRenderer.on("sync-status", (event, status) => {
        document.getElementById("syncStatus").textContent = status.message;
    });
</script>
</body>
</html>